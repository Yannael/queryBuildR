(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():e.mobileConsole=t()})(this,function(){var e='<div id="jsmc-collapse"></div><div id="jsmc-clear">&#xd7</div><div id="jsmc-commands">&#x2261</div><div id="jsmc-commands-container"></div><div id="jsmc-content">	<input id="jsmc-button" type="button" value="Run"/>	<div id="jsmc-log">	</div>	<div id="jsmc-input-container">		<input id="jsmc-input" type="text" placeholder="type your js here"/>	</div></div>',t='	<div class="jsmc-log-text"></div>	<div class="jsmc-log-target"></div>',n={props:{showOnError:!1,proxyConsole:!0,isCollapsed:!1,catchErrors:!0},init:function(){this.commandsHash=[],this.initialized||(this.props.catchErrors&&this.bindErrorListener(),this.initializeContainers(),this.bindListeners(),this.initialized=!0,this.props.proxyConsole?this.decorateConsole():this.undecorateConsole())},options:function(e){for(var t in e)typeof this.props[t]!="undefined"&&(this.props[t]=e[t]);this.init()},show:function(e){var t=document.getElementById("js-mobile-console");t||this.init(),this.$el.container.style.display="block",e&&e.expand&&this.toggleCollapsed(!1)},hide:function(){this.$el&&this.$el.container&&(this.$el.container.style.display="none")},commands:function(e){if(typeof e!="object")throw new Error("mobileConsole: commands method accepts object, not "+typeof e);this.commandsHash=e,this.commandsHashLength=0;for(var t in e)e.hasOwnProperty(t)&&this.commandsHashLength++;this.commandsHashLength&&this.populateCommandsContainer_()},populateCommandsContainer_:function(){var e=this;for(var t in this.commandsHash)if(this.commandsHash.hasOwnProperty(t)){var n=document.createElement("div");n.className="jsmc-command",n.innerHTML=t,n.command=this.commandsHash[t];var r=document.createElement("div");r.className="jsmc-command-wrapper",r.appendChild(n),this.$el.commandsContainer.appendChild(r)}this.commandsPopulated||this.$el.commandsContainer.addEventListener("click",function(t){if(t.target.className==="jsmc-command"){var n=t.target.command,r=e.eval(n);e.logValue(n,!1,!0),e.logValue(r.text,r.error)}}),this.commandsPopulated=!0},destroy:function(){var e=document.getElementById("js-mobile-console");e.parentNode.removeChild(e)},initializeContainers:function(t){this.$el={},el=this.$el.container=document.createElement("div"),el.id="js-mobile-console",el.innerHTML=e,el.style.display="none",document.body.appendChild(el),this.$el.input=document.getElementById("jsmc-input"),this.$el.button=document.getElementById("jsmc-button"),this.$el.log=document.getElementById("jsmc-log"),this.$el.content=document.getElementById("jsmc-content"),this.$el.collapseControl=document.getElementById("jsmc-collapse"),this.$el.clearControl=document.getElementById("jsmc-clear"),this.$el.commandsControl=document.getElementById("jsmc-commands"),this.$el.commandsContainer=document.getElementById("jsmc-commands-container"),this.props.isCollapsed?(this.$el.content.style.display="none",this.$el.clearControl.style.display="none",this.$el.commandsControl.style.display="none",this.isCollapsed=!0,this.$el.collapseControl.innerHTML="&#9650;"):this.$el.collapseControl.innerHTML="&#9660;"},toggleCollapsed:function(e){this.isCollapsed=typeof e=="boolean"?e:!this.isCollapsed;var t=this.isCollapsed?"none":"block";this.$el.content.style.display=t,this.$el.collapseControl.innerHTML=this.isCollapsed?"&#9650;":"&#9660;",this.isCollapsed?(this.$el.clearControl.style.display="none",this.$el.commandsControl.style.display="none"):(this.$el.clearControl.style.display="inline-block",this.commandsHashLength&&(this.$el.commandsControl.style.display="inline-block"))},bindListeners:function(){function t(){var t=e.$el.input.value,n=e.eval(t);e.logValue(n.text,n.error)}var e=this;this.$el.collapseControl.addEventListener("click",function(){e.toggleCollapsed()}),this.$el.clearControl.addEventListener("click",function(){e.clearLogs()}),this.$el.button.addEventListener("click",function(){t()}),this.$el.input.addEventListener("keyup",function(e){e.which===13&&t()}),this.$el.commandsControl.addEventListener("click",function(){e.toggleCommands()})},toggleCommands:function(){this.commandsShown=!this.commandsShown,this.$el.commandsContainer.style.display=this.commandsShown?"inline-block":"none"},eval:function(e){var t,n;try{t=window.eval(e)}catch(r){t=r.message,n=!0}if(JSON&&JSON.stringify)try{t=JSON.stringify(t)}catch(r){t=r.message,n=!0}return{text:t,error:n}},clearLogs:function(){this.$el.log.innerHTML=""},bindErrorListener:function(){var e=this;window.onerror=function(t,n,r,i){e.props.showOnError&&e.show({expand:!0});var s=n+":"+r+(i?":"+i:"");e.logValue(t,s)}},appendLogEl:function(e){this.$el.log.appendChild(e),this.$el.log.scrollTop=this.$el.log.scrollHeight},decorateConsole:function(){function t(e){if(JSON&&JSON.stringify)try{for(var t=0;t<e.length;t++)e[t]=JSON.stringify(e[t])}catch(n){e=[n.message];var r=!0}return{text:e.join(" "),error:r}}var e=this;if(this.consoleDecorated)return;this.consoleDecorated=!0,window.console&&(window.console.log&&(this.oldLog=window.console.log,window.console.log=function(){var n=[].slice.call(arguments);e.oldLog.apply(window.console,n);var r=t(n);e.logValue(r.text,r.error)}),window.console.info&&(this.oldinfo=window.console.info,window.console.info=function(){var n=[].slice.call(arguments);e.oldinfo.apply(window.console,n);var r=t(n);e.logValue(r.text,r.error)}),window.console.warn&&(this.oldwarn=window.console.warn,window.console.warn=function(){var n=[].slice.call(arguments);e.oldwarn.apply(window.console,n);var r=t(n);e.logValue(r.text,r.error)}),window.console.error&&(this.olderror=window.console.error,window.console.error=function(){var n=[].slice.call(arguments);e.olderror.apply(window.console,n);var r=t(n);e.logValue(r.text,r.error)}))},undecorateConsole:function(){var e=this;this.consoleDecorated&&(window.console.log=function(){var t=[].slice.call(arguments);e.oldLog.apply(window.console,t)},window.console.info=function(){var t=
[].slice.call(arguments);e.oldinfo.apply(window.console,t)},window.console.warn=function(){var t=[].slice.call(arguments);e.oldwarn.apply(window.console,t)},window.console.error=function(){var t=[].slice.call(arguments);e.olderror.apply(window.console,t)})},logValue:function(e,n,r){var i=document.createElement("div");i.className="jsmc-log-el",i.innerHTML=t,n&&(i.className+=" jsmc-log-error"),r&&(i.className+=" jsmc-log-command");var s=i.getElementsByClassName("jsmc-log-text")[0];s.innerHTML=e;if(typeof n=="string"){var o=i.getElementsByClassName("jsmc-log-target")[0];o.innerHTML=n}this.appendLogEl(i)}};return n});
